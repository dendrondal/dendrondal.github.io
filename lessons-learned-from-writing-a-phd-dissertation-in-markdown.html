<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns#">
<head>
  <meta charset="UTF-8" />
  <title>Lessons Learned from Writing a PhD Dissertation in Markdown | Dal&#39;s Portfolio</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,600,600i%7CSource+Code+Pro:400,400i,600" />
  <link rel="stylesheet" href="/static/m-dark.css" />
  <link rel="icon" href="/images/favicon.ico" type="image/x-ico" />
  <link rel="canonical" href="/lessons-learned-from-writing-a-phd-dissertation-in-markdown.html" />
  <link href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Dal&#39;s Portfolio" />
  <link href="/feeds/projects.atom.xml" type="application/atom+xml" rel="alternate" title="Dal&#39;s Portfolio | Projects" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#353535" />
  <meta name="twitter:site" content="@dendrondal" />
  <meta property="og:site_name" content="Dal&#39;s Portfolio" />
  <meta property="og:title" content="Lessons Learned from Writing a PhD Dissertation in Markdown" />
  <meta name="twitter:title" content="Lessons Learned from Writing a PhD Dissertation in Markdown" />
  <meta property="og:url" content="/lessons-learned-from-writing-a-phd-dissertation-in-markdown.html" />
  <meta property="og:description" content="When researching ways to write my dissertation, I ended up settling on Tom Pollard’s thesis template. I was excited at the prospect of avoiding gigantic, unstable word files, being able to break down this massive work into more manageable chunks, and utilizing all the great features of modern text …" />
  <meta name="twitter:description" content="When researching ways to write my dissertation, I ended up settling on Tom Pollard’s thesis template. I was excited at the prospect of avoiding gigantic, unstable word files, being able to break down this massive work into more manageable chunks, and utilizing all the great features of modern text …" />
  <meta name="twitter:card" content="summary" />
  <meta property="og:type" content="article" />
</head>
<body>
<header><nav id="navigation">
  <div class="m-container">
    <div class="m-row">
      <a href="/" id="m-navbar-brand" class="m-col-t-9 m-col-m-none m-left-m"><img src="/images/tree.jpg" alt="" />Dal&#39;s Portfolio</a>
      <a id="m-navbar-show" href="#navigation" title="Show navigation" class="m-col-t-3 m-hide-m m-text-right"></a>
      <a id="m-navbar-hide" href="#" title="Hide navigation" class="m-col-t-3 m-hide-m m-text-right"></a>
      <div id="m-navbar-collapse" class="m-col-t-12 m-show-m m-col-m-none m-right-m">
        <div class="m-row">
          <ol class="m-col-t-12 m-col-m-none">
            <li><a href="/pages/about-me.html">About</a></li>
            <li><a href="https://github.com/dendrondal">GitHub</a></li>
            <li><a href="https://linkedin.com/in/dal-williams">LinkedIn</a></li>
            <li><a href="https://twitter.com/dendrondal">Twitter</a></li>
          </ol>
        </div>
      </div>
    </div>
  </div>
</nav></header>
<main>
<div class="m-container">
  <div class="m-row">
    <article class="m-col-m-10 m-nopadb">
      <header>
        <h1><a href="/lessons-learned-from-writing-a-phd-dissertation-in-markdown.html" rel="bookmark" title="Permalink to Lessons Learned from Writing a PhD Dissertation in Markdown">
          <time class="m-date" datetime="2019-11-26T00:00:00-06:00">
            Nov <span class="m-date-day">26</span> 2019
          </time>
          Lessons Learned from Writing a PhD Dissertation in Markdown
        </a></h1>
        <p>When researching ways to write my dissertation, I ended up settling on
        <a href="https://github.com/tompollard/phd_thesis_markdown">Tom Pollard’s thesis
        template</a>. I was
        excited at the prospect of avoiding gigantic, unstable word files, being
        able to break down this massive work into more manageable chunks, and
        utilizing all the great features of modern text …</p>
      </header>
      <div class="m-clearfix-l"></div>
<!-- content -->
<p>When researching ways to write my dissertation, I ended up settling on
<a href="https://github.com/tompollard/phd_thesis_markdown">Tom Pollard’s thesis
template</a>. I was
excited at the prospect of avoiding gigantic, unstable word files, being
able to break down this massive work into more manageable chunks, and
utilizing all the great features of modern text editors to make
markhttps://www.needpix.com/photo/286807/papers-stack-heap-documents-business-paperwork-information-stacked-researchdown
writing easier (intellisense, code folding, and syntax highlighting, for
starters). However, this project was not without its pain points. For
anyone else who ends up going this route, I’d like to share some of the
ups and downs of this journey.</p>
<section id="the-unavoidable-behemoth-that-is-latex">
<h2>The unavoidable behemoth that is LaTeX</h2>
<p>I started this project with no desire to learn LaTeX. However, I ended
up having to write a decent amount of it by hand. First of all, bear in
mind that even though it is a mature technology, <a href="https://tex.stackexchange.com/questions/313768/why-getting-this-error-tlmgr-unknown-directive">there are still
several painful bugs in LaTeX
distros</a>.
First off, here is something that I wish I had earlier: <a href="https://tex.stackexchange.com/questions/1092/how-to-install-vanilla-texlive-on-debian-or-ubuntu">a guide to
installing a stable variant of
TeXLive</a>.
This is by far the most useful installation tutorial I have found for
TexLive, helping you to properly install packages with tlmgr and avoid
the dreaded <a href="https://github.com/tompollard/phd_thesis_markdown/issues">Error
34</a>. That
being said, I was never able to get successful PDF compilation on my
Ubuntu machine, I had to switch over to Mac Yosemite to get a PDF that
actually had pictures, which are a pretty key part of a scientific
thesis…</p>
<p><img alt="image0" src="https://thumbs.gfycat.com/ThankfulUnkemptHydatidtapeworm-small.gif" /></p>
<p>Worse still, LaTeX error messages are quite cryptic. One of the
strangest recurring issues that I found was a <a href="https://github.com/jgm/pandoc/issues/5801">single, 0.5
pt. horizontal line</a> in a
table that broke the entire compilation. Many STEM dissertations tend to
use horizontal figures, which are thankfully quite easy to do. First
off, in the <code>preamble.tex</code> file, insert <code>\usepackage{rotate}</code> and
<code>\usepackage{pdfpages}</code> somewhere before <code>\begin{document}</code>. Then,
wherever you need a horizontal figure, replace the traditional markdown
syntax with this:</p>
<pre class="m-code"><span class="k">\begin</span><span class="nb">{</span>landscape<span class="nb">}</span>

<span class="k">\begin</span><span class="nb">{</span>sidewaysfigure<span class="nb">}</span>
    <span class="k">\hypertarget</span><span class="nb">{</span>fig:LABEL<span class="nb">}{</span><span class="c">%</span>
        <span class="k">\includegraphics</span><span class="nb">{</span>PATH<span class="nb">_</span>TO<span class="nb">_</span>IMAGE<span class="nb">}</span>
        <span class="k">\caption</span><span class="na">[SHORT_CAPTION]</span><span class="nb">{</span>CAPTION<span class="nb">}</span>
        <span class="k">\label</span><span class="nb">{</span>fig:LABEL<span class="nb">}</span>
    <span class="nb">}</span>
<span class="k">\end</span><span class="nb">{</span>sidewaysfigure<span class="nb">}</span>

<span class="c">%Repeat for additional sideways figures</span>

<span class="k">\end</span><span class="nb">{</span>landscape<span class="nb">}</span></pre>
<p>Here, LABEL is what you’ll use to reference this in the main text, using
<code>&#64;fig:LABEL</code>. This should take care of your image needs, but images
are unfortunately nowhere near as problematic as tables. Note that this
will put page numbers on the left side of every page. If you want to
have them at the bottom of your page, put this in your preamble:</p>
<pre class="m-code"><span class="k">\fancypagestyle</span><span class="nb">{</span>sideways<span class="nb">}{</span>
<span class="k">\fancyhf</span><span class="nb">{}</span> <span class="c">%Clears the header/footer</span>
<span class="k">\fancyfoot</span><span class="nb">{</span><span class="c">% Footer</span>
<span class="k">\makebox</span><span class="na">[\textwidth][r]</span><span class="nb">{</span><span class="c">% Right</span>
  <span class="k">\rlap</span><span class="nb">{</span><span class="k">\hspace</span><span class="nb">{</span>.75cm<span class="nb">}</span><span class="c">% Push out of margin by \footskip</span>
    <span class="k">\smash</span><span class="nb">{</span><span class="c">% Remove vertical height</span>
      <span class="k">\raisebox</span><span class="nb">{</span>4.87in<span class="nb">}{</span><span class="c">% Raise vertically</span>
        <span class="k">\rotatebox</span><span class="nb">{</span>90<span class="nb">}{</span><span class="k">\thepage</span><span class="nb">}}}}}}</span><span class="c">% Rotate counter-clockwise</span>
<span class="k">\renewcommand</span><span class="nb">{</span><span class="k">\headrulewidth</span><span class="nb">}{</span>0pt<span class="nb">}</span><span class="c">% No header rule</span>
<span class="k">\renewcommand</span><span class="nb">{</span><span class="k">\footrulewidth</span><span class="nb">}{</span>0pt<span class="nb">}</span><span class="c">% No footer rule</span>
<span class="nb">}</span></pre>
<p>Now, just add <code>\pagestyle{sideways}</code> before <code>begin{landscape}</code> and
<code>\pagestyle{plain}</code> after <code>end{landscape}</code> and you’ll have page
numbers centered at the bottom of your landscape pages.</p>
</section>
<section id="dealing-with-large-tables">
<h2>Dealing with Large Tables</h2>
<p>Just because a table looks nice in markdown doesn’t mean it’s going to
look correct in its PDF form. Often, the text in column headers or cells
overlaps, or the spacing between columns doesn’t make sense. Thankfully,
Pandoc has its own custom table syntax that allows for line breaks. My
recommended workflow to do this is as follows:</p>
<ol>
<li>Create a markdown file <em>outside</em> of the source directory (perhaps in
a directory called “bin” or “scratch” for clarity). Let’s call it
<code>tables.md</code> for this tutorial</li>
<li>Paste your problem tables (in markdown form) into this file</li>
<li>Run
<code>pandoc -t markdown+multiline_tables -o cleaned_tables.md tables.md</code></li>
<li>Paste the new multi-line tables where the original tables would be in
your document</li>
</ol>
<p>There are some special cases where this won’t be sufficient. Even though
<a href="https://github.com/martisak/pandoc-shortcaption">there’s a great package for figure short
captions</a>, there’s
no such thing for tables as of yet. In your bin/scratch directory, run
<code>pandoc -H ../styles/preamble.tex -o tables.tex tables.md</code>. Now, take
the LaTeX version of your table, and insert square brackets between
<code>\caption</code> and the curly brace. This can also help with sideways
tables, as you just need to wrap the latex table with
<code>\begin{landscape}</code> and <code>\end{landscape}</code>.</p>
</section>
<section id="other-tips">
<h2>Other Tips</h2>
<p>My <a href="https://github.com/dendrondal/phd_thesis_markdown">fork of the original
template</a> uses
several other Pandoc filters, including
<a href="https://github.com/tomduck/pandoc-xnos">xnos</a> and
<a href="https://github.com/martisak/pandoc-shortcaption">shortcaptions</a>.
These cut down on the amount of LaTeX needed. It should be said,
however, that I wasn’t able to get the autocomplete feature of fignos to
work (<code>+&#64;fig</code> and <code>*&#64;fig</code>, respectively). This can be fixed by a
simple find and replace, with +&#64; being replaced with Fig. &#64;. This also
works for equations and tables, just be mindful that you’re using the
proper amount of whitespace. Other tips:</p>
<ul>
<li>Install a stable version of TexLive (or your distro of choice) EARLY
to avoid headaches down the road.</li>
<li>Make sure tlmgr works properly to install all your packages. Check
<code>which tlmgr</code> both with and without sudo permissions to make sure
its pointing to your install, which is especially important on
Debian-based systems.</li>
<li>Compile early and often. As mentioned previously, there are many
strange quirks with PDF compilation.</li>
<li>Make sure to find you which version of Pandoc you’re using
(<code>pandoc --version</code>). This is especially necessary if you have
conda in your PATH, as it installs its own version. My Mac was using
1.1.3, instead of the current 2.7!</li>
<li>I would highly recommend VSCode as an editor. It has phenomenal
markdown syntax highlighting and previews with Markdown All in One,
intellisense completion of figure referencing, and very nice
cite-while-you-write extensions including Citation Picker for Zotero
and Pandoc Citer. It also has version control tools built in for
easier merging, and a user-level dictionary where you can put
technical words that would originally be flagged by the spell checker
(also an extension).</li>
</ul>
</section>
<section id="conclusions-and-caveats">
<h2>Conclusions and Caveats</h2>
<p>So, the main question one might ask is whether this is all worth it. I
would still say yes, despite the major headaches and long nights this
caused. First off, Word is in my personal opinion, absolutely terrible.
Between the difficulty of things as simple as moving tables and images
without messing up your paragraphs, the instability with large documents
with tons of images, hogging of RAM, and the potential to completely
corrupt your entire dissertation thanks to EndNote (literally happened
to me the night before my undergrad thesis submission), I would
absolutely not recommend it. I believe
<a href="https://www.literatureandlatte.com/scrivener/overview">Scrivener</a> is
a pretty great alternative to Word/OpenOffice/Pages in terms of large,
modular documents, but it’s not available for Linux, and I’m not sure if
it provides the full functionality of this workflow (auto
figure/table/equation numbering, Git compatibility, etc.).</p>
<p>All that being said, with the amount of time I spent messing with LaTeX,
I probably could have just as easily <a href="https://github.com/sergiocorreia/panflute">written my own Pandoc filters in
Python</a> to emulate some
missing functionality with HTML conversion (<code>\listoffigures</code> and short
captions in particular), then styled the whole document with CSS.
<a href="https://www.princexml.com/">Prince</a>, which can be used as a Pandoc
pdf-engine, includes CSS styling. I’m not sure if this would calculate
line breaks and image placement as well as Xelatex, but would be worth a
try to prevent fonts and horizontal lines breaking a 200 page document.</p>
<p>To anyone embarking on their dissertation writing journey, I wish you
the best, and want to remind you that there is a light at the end of the
tunnel!</p>
</section>
<!-- /content -->
      <footer>
        <p>Posted by <a href="/author/jon-steven-dal-williams.html">Jon Steven Dal Williams</a> on <time datetime="2019-11-26T00:00:00-06:00">Tue 26 November 2019</time> in <a href="/category/projects.html">Projects</a>. Tags: <a href="/tag/science-writing.html">Science Writing</a>, <a href="/tag/latex.html">LaTeX</a>, <a href="/tag/markdown.html">Markdown</a>, <a href="/tag/make.html">Make</a>.</p>
      </footer>
    </article>
    <nav class="m-navpanel m-col-m-2">
      <h3>Categories</h3>
      <ol class="m-block-bar-m">
        <li><a href="/category/blog.html">Blog</a></li>
        <li><a href="/category/projects.html">Projects</a></li>
        <li><a href="/category/talks.html">Talks</a></li>
        <li><a href="/category/tutorials.html">Tutorials</a></li>
      </ol>
      <h3>Tag cloud</h3>
      <ul class="m-tagcloud">
        <li class="m-tag-3"><a href="/tag/airflow.html">Airflow</a></li>
        <li class="m-tag-3"><a href="/tag/altair.html">Altair</a></li>
        <li class="m-tag-3"><a href="/tag/aws.html">AWS</a></li>
        <li class="m-tag-3"><a href="/tag/bash.html">Bash</a></li>
        <li class="m-tag-3"><a href="/tag/bayesian-stats.html">Bayesian stats</a></li>
        <li class="m-tag-3"><a href="/tag/chatbots.html">chatbots</a></li>
        <li class="m-tag-3"><a href="/tag/chemistry.html">chemistry</a></li>
        <li class="m-tag-3"><a href="/tag/cnns.html">CNNs</a></li>
        <li class="m-tag-3"><a href="/tag/computer-vision.html">computer vision</a></li>
        <li class="m-tag-5"><a href="/tag/flask.html">Flask</a></li>
        <li class="m-tag-3"><a href="/tag/functional-programming.html">functional programming</a></li>
        <li class="m-tag-3"><a href="/tag/gans.html">GANs</a></li>
        <li class="m-tag-3"><a href="/tag/jupyter.html">Jupyter</a></li>
        <li class="m-tag-3"><a href="/tag/keras.html">Keras</a></li>
        <li class="m-tag-3"><a href="/tag/latex.html">LaTeX</a></li>
        <li class="m-tag-3"><a href="/tag/luigi.html">Luigi</a></li>
        <li class="m-tag-3"><a href="/tag/make.html">Make</a></li>
        <li class="m-tag-3"><a href="/tag/markdown.html">Markdown</a></li>
        <li class="m-tag-3"><a href="/tag/microsoft.html">Microsoft</a></li>
        <li class="m-tag-5"><a href="/tag/mission-driven-data-science.html">Mission-driven data science</a></li>
        <li class="m-tag-3"><a href="/tag/mongodb.html">MongoDB</a></li>
        <li class="m-tag-3"><a href="/tag/pandas.html">Pandas</a></li>
        <li class="m-tag-3"><a href="/tag/papermill.html">Papermill</a></li>
        <li class="m-tag-3"><a href="/tag/pytorch.html">PyTorch</a></li>
        <li class="m-tag-3"><a href="/tag/reproducibility.html">reproducibility</a></li>
        <li class="m-tag-3"><a href="/tag/rest.html">REST</a></li>
        <li class="m-tag-3"><a href="/tag/science-writing.html">Science Writing</a></li>
        <li class="m-tag-3"><a href="/tag/scikit-learn.html">SciKit Learn</a></li>
        <li class="m-tag-3"><a href="/tag/spacy.html">Spacy</a></li>
        <li class="m-tag-3"><a href="/tag/sqalchemy.html">SQAlchemy</a></li>
        <li class="m-tag-3"><a href="/tag/sqlite.html">SQLite</a></li>
        <li class="m-tag-3"><a href="/tag/swagger.html">Swagger</a></li>
        <li class="m-tag-3"><a href="/tag/tensorflow.html">TensorFlow</a></li>
        <li class="m-tag-5"><a href="/tag/tutorials.html">tutorials</a></li>
        <li class="m-tag-3"><a href="/tag/vaes.html">VAEs</a></li>
        <li class="m-tag-3"><a href="/tag/wild-python.html">wild python</a></li>
      </ul>
    </nav>
  </div>
</div>
</main>
<footer><nav>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <p>Dal's Portfolio. Powered by <a href="https://getpelican.com">Pelican</a> and <a href="https://mcss.mosra.cz">m.css</a>.</p>
      </div>
    </div>
  </div>
</nav></footer>
</body>
</html>