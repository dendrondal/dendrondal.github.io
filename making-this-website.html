<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns#">
<head>
  <meta charset="UTF-8" />
  <title>Making this Website | Dal&#39;s Portfolio</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,600,600i%7CSource+Code+Pro:400,400i,600" />
  <link rel="stylesheet" href="/static/m-dark.css" />
  <link rel="icon" href="/images/favicon.ico" type="image/x-ico" />
  <link rel="canonical" href="/making-this-website.html" />
  <link href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Dal&#39;s Portfolio" />
  <link href="/feeds/projects.atom.xml" type="application/atom+xml" rel="alternate" title="Dal&#39;s Portfolio | Projects" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#353535" />
  <meta name="twitter:site" content="@dendrondal" />
  <meta property="og:site_name" content="Dal&#39;s Portfolio" />
  <meta property="og:title" content="Making this Website" />
  <meta name="twitter:title" content="Making this Website" />
  <meta property="og:url" content="/making-this-website.html" />
  <meta property="og:description" content="I wanted to share some of the process used in creating this website. I’m certainly not a frontend developer by any stretch of the imagination, so this was a fully new experience for me. Yes, I had the option of spinning up a squarespace or wordpress site, but where …" />
  <meta name="twitter:description" content="I wanted to share some of the process used in creating this website. I’m certainly not a frontend developer by any stretch of the imagination, so this was a fully new experience for me. Yes, I had the option of spinning up a squarespace or wordpress site, but where …" />
  <meta name="twitter:card" content="summary" />
  <meta property="og:type" content="article" />
</head>
<body>
<header><nav id="navigation">
  <div class="m-container">
    <div class="m-row">
      <a href="/" id="m-navbar-brand" class="m-col-t-9 m-col-m-none m-left-m"><img src="/images/tree.jpg" alt="" />Dal&#39;s Portfolio</a>
      <a id="m-navbar-show" href="#navigation" title="Show navigation" class="m-col-t-3 m-hide-m m-text-right"></a>
      <a id="m-navbar-hide" href="#" title="Hide navigation" class="m-col-t-3 m-hide-m m-text-right"></a>
      <div id="m-navbar-collapse" class="m-col-t-12 m-show-m m-col-m-none m-right-m">
        <div class="m-row">
          <ol class="m-col-t-12 m-col-m-none">
            <li><a href="/pages/about-me.html">About</a></li>
            <li><a href="https://github.com/dendrondal">GitHub</a></li>
            <li><a href="https://linkedin.com/in/dal-williams">LinkedIn</a></li>
            <li><a href="https://twitter.com/dendrondal">Twitter</a></li>
          </ol>
        </div>
      </div>
    </div>
  </div>
</nav></header>
<main>
<div class="m-container">
  <div class="m-row">
    <article class="m-col-m-10 m-nopadb">
      <header>
        <h1><a href="/making-this-website.html" rel="bookmark" title="Permalink to Making this Website">
          <time class="m-date" datetime="2019-02-17T00:00:00-06:00">
            Feb <span class="m-date-day">17</span> 2019
          </time>
          Making this Website
        </a></h1>
        <p>I wanted to share some of the process used in creating this website. I’m
        certainly not a frontend developer by any stretch of the imagination, so
        this was a fully new experience for me. Yes, I had the option of
        spinning up a squarespace or wordpress site, but where …</p>
      </header>
      <div class="m-clearfix-l"></div>
<!-- content -->
<p>I wanted to share some of the process used in creating this website. I’m
certainly not a frontend developer by any stretch of the imagination, so
this was a fully new experience for me. Yes, I had the option of
spinning up a squarespace or wordpress site, but where’s the fun in
that? I decided to build and deploy it myself, as doing this from
scratch makes for a great learning opportunity.</p>
<p>As with many projects, the first iteration left a lot of room for
improvement. The first version (stack listed below) was great, but
overkill for my use case. However, it still provided a learning
experience and managed to get me a functional website, so no regrets!
The second attempt is far more streamlined, scalable, and efficient.</p>
<section id="stack-first-attempt">
<h2>Stack (First attempt)</h2>
<p>-<strong>Flask</strong> Flask is my framework of choice for most projects, just
because of <a href="http://dalwilliams.info/localvore">its usefulness in creating RESTful
APIs</a>. Django is a bit better for
creating full websites just because of the batteries-included approach
and strong opinionation of the “right way” to do things. This means
quicker iteration times for larger projects. I don’t expect this website
to get too large, and it’s helpful to build the components individually
for a deeper understanding of each.</p>
<p>-<strong>Frontend</strong> There are several examples of open-source responsive
templates. I chose <a href="https://html5up.net/">HTML5up</a>, as I really liked
the aesthetics of several of their templates. This saves a lot of
overhead on my part, as the HTML/CSS/JS/SASS are already defined, and I
just had to tweak them to my liking.</p>
<section id="deprecated-portions">
<h3>Deprecated Portions</h3>
<p>These were in the first version of the website before the static
refactor.</p>
<p>-<strong>SQLite/SQLAlchemy</strong> Comes included with python, and I shouldn’t have
to deal with too much data or a large amount of concurrency. <a href="https://pythonbytes.fm/episodes/show/60/don-t-dismiss-sqlite-as-just-a-starter-db">It’s more
than just a starter
database</a>.
Granted that this is being exposed to the web, it’s a good idea to
sanitize data going into my app to prevent injection attacks. That’s
where SQLAlchemy comes in, which also requires less boilerplate for
queries. Yes, all SQL writes are behind authentication, but better safe
than sorry!</p>
<p>-<strong>Swagger/Connexion</strong> Incredibly useful tool for creating REST APIs.
You can define every endpoint with expected schema, security level, and
status codes in a .yaml file before you write a single line of code.</p>
<p>-<strong>ElasticBeanstalk</strong> After playing around with a few other options, I
realized pretty quickly why AWS is the industry standard. Only a few
commands to spin up a website without having to manually install
Nginx/Apache/etc. Also has straightforward DNS and SSL certification, on
top of being quite a bit cheaper than the competition.</p>
<p>##Lessons Learned This is absolutely a viable way to deploy a dynamic,
responsive website. However, I realized after a month or two of
deployment that several of my tech choices were overkill for the desired
application, not to mention pushing me out of the AWS free tier. I
realized that a portfolio website can be served using entirely static
content, similar to Jekyll. Flask actually has a phenomenal workflow to
generate a static blog/portfolio site: FlatPages + Freeze. That brings
me to the new stack:</p>
</section>
</section>
<section id="stack-second-attempt">
<h2>Stack (Second Attempt)</h2>
<p>-<strong>Frozen Flask</strong> Allows for a normal Flask development workflow,
followed by running a command line tool to build the entire web app to a
folder structure ideal for serving as a static site.</p>
<p>-<strong>FlatPages</strong> Pairs well with Freeze for blog hosting, assuming you use
markdown to write your posts. Just lead off your blog post with a short
yaml description of post metadata. This can be read directly into Jinja
for formatting, just have this in your post:</p>
<pre class="m-code"><span class="nt">title</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Generative Models</span>
<span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">A meetup presentation I gave over the history and state-of-the-art of generative models</span>
<span class="nt">thumbnail</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">https://upload.wikimedia.org/wikipedia/commons/1/18/Bayes%27_Theorem_MMB_01.jpg</span>
<span class="nt">tags</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ML, Teaching, GANs, Bayes&#39; Theorem, VAEs, Spam Filtering, Chemistry</span></pre>
<p>Assuming you have a pages directory in your application root, the flask
app can be as simple as this:</p>
<pre class="m-code"><span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">from_pyfile</span><span class="p">(</span><span class="s1">&#39;settings.cfg&#39;</span><span class="p">)</span>
<span class="n">pages</span> <span class="o">=</span> <span class="n">FlatPages</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
<span class="n">freezer</span> <span class="o">=</span> <span class="n">Freezer</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">main_page</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;index.html&#39;</span><span class="p">,</span> <span class="n">pages</span><span class="o">=</span><span class="n">pages</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&lt;path:path&gt;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">render_post</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
    <span class="n">page</span> <span class="o">=</span> <span class="n">pages</span><span class="o">.</span><span class="n">get_or_404</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;post.html&#39;</span><span class="p">,</span> <span class="n">page</span><span class="o">=</span><span class="n">page</span><span class="p">)</span></pre>
<p>with the following Jinja to render the content. Note that the yaml
notations in the markdown can be used as attributes within Jinja:</p>
<pre class="m-code">{%  for page in pages %}
    <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">{{</span> <span class="na">url_for</span><span class="err">(&quot;</span><span class="na">render_post</span><span class="err">&quot;,</span> <span class="na">path</span><span class="o">=</span><span class="s">page.path)</span> <span class="err">}}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;post&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;thumbnail&quot;</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">img</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;width:150px; height:150px; margin-left: 5%; margin-top: 5%; margin-bottom: 5%;&quot;</span> <span class="na">src</span><span class="o">=</span><span class="s">{{</span> <span class="na">page</span><span class="err">.</span><span class="na">thumbnail</span> <span class="err">}}</span> <span class="na">alt</span><span class="p">&gt;</span>
             <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
         <span class="p">&lt;</span><span class="nt">h3</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;margin-top:0; font-size:95%; alignment: center&quot;</span><span class="p">&gt;</span>{{ page.title }}<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">h4</span> <span class="na">style</span><span class="o">=</span><span class="s">font-size:60%</span><span class="p">&gt;</span>{{ page.description }}<span class="p">&lt;/</span><span class="nt">h4</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
{%  endfor %}</pre>
<p>And that’s it! The markdown is rendered to HTML, with the option of
adding extensions, and compiled to a neat folder with all your assets
and pages. Full credit to <a href="https://blog-byjohnyang.herokuapp.com/flask-website/">John
Yang</a> for his
tutorial on the subject. Once I had that structure, it’s back to AWS:</p>
<p>-<strong>Amazon S3</strong> A static website can be directly hosted using two S3
buckets: one for the content itself, and one for redirects. As per
usual, with the help of Route 53, you can then link it to your domain
name. There is a very <a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/website-hosting-custom-domain-walkthrough.html">helpful
guide</a>
for doing so readily available.</p>
</section>
<section id="conclusions">
<h2>Conclusions</h2>
<p>This project both provided a phenomenal learning experience, and
cemented the fact that I don’t want to do frontend development as a full
time job (that is until WebAssembly becomes mainstream, but that’s a
whole different article). I’d never written a single line of CSS, had no
experience with Jinja, and had never deployed an app on a cloud service
before. It took a lot of trial-and-error, refactoring, and design
decisions, the latter of which is both a blessing and curse of Flask.
Overall, I’m quite happy with the result, and I know I learned quite a
few transferable skills in the process.</p>
<p>You can find the full source for this website <a href="https://bitbucket.org/dendrondal/portfolio/">on
Bitbucket</a></p>
</section>
<!-- /content -->
      <footer>
        <p>Posted by <a href="/author/jon-steven-dal-williams.html">Jon Steven Dal Williams</a> on <time datetime="2019-02-17T00:00:00-06:00">Sun 17 February 2019</time> in <a href="/category/projects.html">Projects</a>. Tags: <a href="/tag/flask.html">Flask</a>, <a href="/tag/aws.html">AWS</a>, <a href="/tag/swagger.html">Swagger</a>, <a href="/tag/sqlite.html">SQLite</a>, <a href="/tag/sqalchemy.html">SQAlchemy</a>, <a href="/tag/rest.html">REST</a>.</p>
      </footer>
    </article>
    <nav class="m-navpanel m-col-m-2">
      <h3>Categories</h3>
      <ol class="m-block-bar-m">
        <li><a href="/category/blog.html">Blog</a></li>
        <li><a href="/category/projects.html">Projects</a></li>
        <li><a href="/category/talks.html">Talks</a></li>
        <li><a href="/category/tutorials.html">Tutorials</a></li>
      </ol>
      <h3>Tag cloud</h3>
      <ul class="m-tagcloud">
        <li class="m-tag-3"><a href="/tag/airflow.html">Airflow</a></li>
        <li class="m-tag-3"><a href="/tag/altair.html">Altair</a></li>
        <li class="m-tag-3"><a href="/tag/aws.html">AWS</a></li>
        <li class="m-tag-3"><a href="/tag/bash.html">Bash</a></li>
        <li class="m-tag-3"><a href="/tag/bayesian-stats.html">Bayesian stats</a></li>
        <li class="m-tag-3"><a href="/tag/chatbots.html">chatbots</a></li>
        <li class="m-tag-3"><a href="/tag/chemistry.html">chemistry</a></li>
        <li class="m-tag-3"><a href="/tag/cnns.html">CNNs</a></li>
        <li class="m-tag-3"><a href="/tag/computer-vision.html">computer vision</a></li>
        <li class="m-tag-5"><a href="/tag/flask.html">Flask</a></li>
        <li class="m-tag-3"><a href="/tag/functional-programming.html">functional programming</a></li>
        <li class="m-tag-3"><a href="/tag/gans.html">GANs</a></li>
        <li class="m-tag-3"><a href="/tag/jupyter.html">Jupyter</a></li>
        <li class="m-tag-3"><a href="/tag/keras.html">Keras</a></li>
        <li class="m-tag-3"><a href="/tag/latex.html">LaTeX</a></li>
        <li class="m-tag-3"><a href="/tag/luigi.html">Luigi</a></li>
        <li class="m-tag-3"><a href="/tag/make.html">Make</a></li>
        <li class="m-tag-3"><a href="/tag/markdown.html">Markdown</a></li>
        <li class="m-tag-3"><a href="/tag/microsoft.html">Microsoft</a></li>
        <li class="m-tag-5"><a href="/tag/mission-driven-data-science.html">Mission-driven data science</a></li>
        <li class="m-tag-3"><a href="/tag/mongodb.html">MongoDB</a></li>
        <li class="m-tag-3"><a href="/tag/pandas.html">Pandas</a></li>
        <li class="m-tag-3"><a href="/tag/papermill.html">Papermill</a></li>
        <li class="m-tag-3"><a href="/tag/pytorch.html">PyTorch</a></li>
        <li class="m-tag-3"><a href="/tag/reproducibility.html">reproducibility</a></li>
        <li class="m-tag-3"><a href="/tag/rest.html">REST</a></li>
        <li class="m-tag-3"><a href="/tag/science-writing.html">Science Writing</a></li>
        <li class="m-tag-3"><a href="/tag/scikit-learn.html">SciKit Learn</a></li>
        <li class="m-tag-3"><a href="/tag/spacy.html">Spacy</a></li>
        <li class="m-tag-3"><a href="/tag/sqalchemy.html">SQAlchemy</a></li>
        <li class="m-tag-3"><a href="/tag/sqlite.html">SQLite</a></li>
        <li class="m-tag-3"><a href="/tag/swagger.html">Swagger</a></li>
        <li class="m-tag-3"><a href="/tag/tensorflow.html">TensorFlow</a></li>
        <li class="m-tag-5"><a href="/tag/tutorials.html">tutorials</a></li>
        <li class="m-tag-3"><a href="/tag/vaes.html">VAEs</a></li>
        <li class="m-tag-3"><a href="/tag/wild-python.html">wild python</a></li>
      </ul>
    </nav>
  </div>
</div>
</main>
<footer><nav>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <p>Dal's Portfolio. Powered by <a href="https://getpelican.com">Pelican</a> and <a href="https://mcss.mosra.cz">m.css</a>.</p>
      </div>
    </div>
  </div>
</nav></footer>
</body>
</html>